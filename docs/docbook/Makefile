#make documentation. The Doxygen docs are created first. They are then
#incorporated into the HTML and PDf docs.
#This is a hand-written Makefile. NOT generated by CMake. Do not delete.

#Requires docbook packages be installed.
#note: having the comments below after a tab is on purpose, to show what we're
#doing from the terminal as we're doing it.
#usage: cd into this directory
#execute
# $make
#for specific targets, specify the target:
# $make pdf
#to remove generated files
# $make clean

all: doxygen pdf html

html:
	#convert xml to html
	xsltproc --xinclude -o ../html/electricera.html customdocbookstylesheet_for_xhtml.xsl electricera.xml
	#copy image files
	cp ../doxygen/html/*.png ../html/
	cp *.svg ../html/
	cp *.png ../html

pdf:
	cp ../etc/uml-diagram.svg class-diagram.svg
	#convert xml to intermediate using custom stylesheet
	xsltproc --xinclude -o intermediate.fo customdocbookstylesheet.xsl electricera.xml	
	#convert intermediate to pdf file
	fop -pdf electricera.pdf -fo intermediate.fo

doxygen:
	#creating class documentation with Doxygen
	cd ../..; doxygen Doxyfile
	cd ../..; doxygen Doxyfile_internal

clean:
	#remove output and intermediate files
	rm -f *.pdf *.fo *.tex 
	#remove html directory
	rm -rf ../html
	rm -rf ../doxygen 
